# Polybar Architecture & Data Flow

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              I3 Window Manager                                  â”‚
â”‚  - Manages workspaces (1-10)                                                   â”‚
â”‚  - Sends workspace events via IPC                                              â”‚
â”‚  - Workspace names from config: "1: ğŸŒ", "2: ó°€«", "3: ó°€›"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â–²
                                        â”‚ i3-msg IPC
                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        POLYBAR - 3 Floating Islands                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  LEFT ISLAND     â”‚  â”‚  CENTER ISLAND   â”‚  â”‚  RIGHT ISLAND                â”‚ â”‚
â”‚ â”‚ (Workspaces)     â”‚  â”‚    (Clock)       â”‚  â”‚   (System Info)              â”‚ â”‚
â”‚ â”‚                  â”‚  â”‚                  â”‚  â”‚                              â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â”‚   WS Bar     â”‚ â”‚  â”‚ â”‚   Date Bar   â”‚ â”‚  â”‚ â”‚   System Bar             â”‚ â”‚
â”‚ â”‚ â”‚ Width: dyn   â”‚ â”‚  â”‚ â”‚ Width: 220px â”‚ â”‚  â”‚ â”‚ Width: 440px             â”‚ â”‚
â”‚ â”‚ â”‚ Offset: 8    â”‚ â”‚  â”‚ â”‚ Offset: 50%  â”‚ â”‚  â”‚ â”‚ Offset: 100%:-448        â”‚ â”‚
â”‚ â”‚ â”‚ Height: 32   â”‚ â”‚  â”‚ â”‚ Height: 32   â”‚ â”‚  â”‚ â”‚ Height: 32               â”‚ â”‚
â”‚ â”‚ â”‚              â”‚ â”‚  â”‚ â”‚              â”‚ â”‚  â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ â”‚ Modules:     â”‚ â”‚  â”‚ â”‚ Modules:     â”‚ â”‚  â”‚ â”‚ Modules:                 â”‚ â”‚
â”‚ â”‚ â”‚ - workspaces â”‚ â”‚  â”‚ â”‚ - date       â”‚ â”‚  â”‚ â”‚ - network                â”‚ â”‚
â”‚ â”‚ â”‚   (tail)     â”‚ â”‚  â”‚ â”‚   (1 sec)    â”‚ â”‚  â”‚ â”‚ - volume                 â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ - cpu                    â”‚ â”‚
â”‚ â”‚                  â”‚  â”‚                  â”‚  â”‚ â”‚ - memory                 â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ Icons:           â”‚  â”‚ â”‚ - controlcenter          â”‚ â”‚
â”‚ â”‚ â”‚ Add WS Bar   â”‚ â”‚  â”‚ ğŸ—“  %date%      â”‚  â”‚ â”‚ - powermenu              â”‚ â”‚
â”‚ â”‚ â”‚ Width: 40px  â”‚ â”‚  â”‚    %time%       â”‚  â”‚ â”‚ - tray                   â”‚ â”‚
â”‚ â”‚ â”‚ Modules:     â”‚ â”‚  â”‚                  â”‚  â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ â”‚ - + (add btn)â”‚ â”‚  â”‚ Click: gsimplecal â”‚  â”‚ â”‚ Colors:                  â”‚ â”‚
â”‚ â”‚ â”‚   on click   â”‚ â”‚  â”‚                  â”‚  â”‚ â”‚ - Connected: success     â”‚ â”‚
â”‚ â”‚ â”‚   â†’ rofi     â”‚ â”‚  â”‚ Colors:          â”‚  â”‚ â”‚ - Volume: default        â”‚ â”‚
â”‚ â”‚ â”‚              â”‚ â”‚  â”‚ - text: foreground â”‚ â”‚ - CPU: info              â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                  â”‚  â”‚ â”‚ - Memory: warning        â”‚ â”‚
â”‚ â”‚                  â”‚  â”‚                  â”‚  â”‚ â”‚ - Controls: accent       â”‚ â”‚
â”‚ â”‚ Colors:          â”‚  â”‚                  â”‚  â”‚ â”‚ - Power: urgent          â”‚ â”‚
â”‚ â”‚ - Focused: accentâ”‚  â”‚                  â”‚  â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ - Occupied: fg   â”‚  â”‚                  â”‚  â”‚ â”‚ Scroll:                  â”‚ â”‚
â”‚ â”‚ - Empty: fg-dim  â”‚  â”‚                  â”‚  â”‚ â”‚ - Volume +/-5%           â”‚ â”‚
â”‚ â”‚ - Urgent: urgent â”‚  â”‚                  â”‚  â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚                  â”‚  â”‚                  â”‚  â”‚ â”‚ Clicks:                  â”‚ â”‚
â”‚ â”‚ Right-click:     â”‚  â”‚                  â”‚  â”‚ â”‚ - Network: nmtui         â”‚ â”‚
â”‚ â”‚ WS 4+ â†’ menu     â”‚  â”‚                  â”‚  â”‚ â”‚ - Volume: pavucontrol    â”‚ â”‚
â”‚ â”‚                  â”‚  â”‚                  â”‚  â”‚ â”‚ - Control: rofi script   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                  â”‚  â”‚ â”‚ - Power: rofi script     â”‚ â”‚
â”‚                       â”‚                  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  override-redirect    â”‚                  â”‚  â”‚                              â”‚
â”‚  enable-ipc = true    â”‚ enable-ipc       â”‚  â”‚ enable-ipc = true           â”‚
â”‚  radius = 14          â”‚  = true          â”‚  â”‚ radius = 14                 â”‚
â”‚  border = 1           â”‚ radius = 14      â”‚  â”‚ border = 1                  â”‚
â”‚                       â”‚ border = 1       â”‚  â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                                                                    â–²
         â”‚ export WS_BAR_WIDTH                                              â”‚
         â”‚ export WS_ADD_OFFSET                                             â”‚ Config reloading
         â”‚                                                                  â”‚ (enable-ipc)
         â”‚                                                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚                    ~/.config/polybar/launch.sh                                   â”‚
â”‚                                                                                   â”‚
â”‚  1. killall -q polybar                                                           â”‚
â”‚  2. Calculate WS_BAR_WIDTH based on current WS count                             â”‚
â”‚     EDGE_PADDING=12, GAP=22, ICON_WIDTH=16, MIN_WS=3                            â”‚
â”‚  3. For each monitor (xrandr):                                                   â”‚
â”‚     MONITOR=$m polybar --reload workspaces &                                    â”‚
â”‚     MONITOR=$m polybar --reload workspace-add &                                 â”‚
â”‚     MONITOR=$m polybar --reload clock &                                         â”‚
â”‚     MONITOR=$m polybar --reload system &                                        â”‚
â”‚  4. Load config from ~/.config/polybar/config.ini                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                                                                    â–²
         â”‚ Called by:                                              Generated by:
         â”‚ - i3 config (exec_always)                              - chezmoi apply
         â”‚ - add-workspace.sh                                     ({{ templating }})
         â”‚ - close-workspace.sh
         â”‚                                                         Reads from:
         â”‚                                                         - themes.toml
         â”‚                                                         - layout.toml
         â”‚                                                         - fonts.toml
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚                 ~/.config/polybar/config.ini (GENERATED)                         â”‚
â”‚                                                                                   â”‚
â”‚  [colors]  â† Filled from themes.toml ({{ $t.bg }}, {{ $t.fg }}, etc.)           â”‚
â”‚  [bar/workspaces]  â† Filled from layout.toml (width, offset, radius, etc.)     â”‚
â”‚  [bar/workspace-add]  â† Same                                                      â”‚
â”‚  [bar/clock]  â† Same                                                              â”‚
â”‚  [bar/system]  â† Same                                                             â”‚
â”‚  [module/...]  â† Font sizes from fonts.toml                                      â”‚
â”‚                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â–²
                                       â”‚ Chezmoi template rendering
                                       â”‚ (chezmoi apply)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ~/.local/share/chezmoi/dotfiles/.chezmoidata/                        â”‚
â”‚                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  themes.toml        â”‚  â”‚  layout.toml          â”‚  â”‚  fonts.toml          â”‚   â”‚
â”‚  â”‚                     â”‚  â”‚                       â”‚  â”‚                      â”‚   â”‚
â”‚  â”‚ [themes.dracula]    â”‚  â”‚ [layout]              â”‚  â”‚ [font]               â”‚   â”‚
â”‚  â”‚  bg = #11111b       â”‚  â”‚  gaps_outer = 8       â”‚  â”‚  mono = "JetBrains"  â”‚   â”‚
â”‚  â”‚  fg = #cdd6f4       â”‚  â”‚  bar_height = 32      â”‚  â”‚  icon = "JetBrains"  â”‚   â”‚
â”‚  â”‚  accent = #cba6f7   â”‚  â”‚  bar_width_ws = 100   â”‚  â”‚  icon_size = 16      â”‚   â”‚
â”‚  â”‚  success = #a6e3a1  â”‚  â”‚  sep_gap = 22         â”‚  â”‚                      â”‚   â”‚
â”‚  â”‚  urgent = #f38ba8   â”‚  â”‚  corner_radius = 10   â”‚  â”‚                      â”‚   â”‚
â”‚  â”‚  ...22 colors       â”‚  â”‚  ...+13 params        â”‚  â”‚                      â”‚   â”‚
â”‚  â”‚                     â”‚  â”‚                       â”‚  â”‚                      â”‚   â”‚
â”‚  â”‚ [themes.monochrome] â”‚  â”‚                       â”‚  â”‚                      â”‚   â”‚
â”‚  â”‚  bg = #0a0a0a       â”‚  â”‚                       â”‚  â”‚                      â”‚   â”‚
â”‚  â”‚  fg = #c0c0c0       â”‚  â”‚                       â”‚  â”‚                      â”‚   â”‚
â”‚  â”‚  ...22 colors       â”‚  â”‚                       â”‚  â”‚                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                       â”‚  â”‚                      â”‚   â”‚
â”‚                           â”‚                       â”‚  â”‚                      â”‚   â”‚
â”‚                           â”‚ PROBLEMS:              â”‚  â”‚                      â”‚   â”‚
â”‚                           â”‚ - EDGE_PADDING=12 NOT HERE  (hardcoded in      â”‚   â”‚
â”‚                           â”‚   launch.sh, workspaces.sh) â”‚                      â”‚
â”‚                           â”‚ - GAP=22 duplicated    â”‚  â”‚                      â”‚   â”‚
â”‚                           â”‚   (sep_gap + launch.sh) â”‚  â”‚                      â”‚   â”‚
â”‚                           â”‚ - ICON_WIDTH=16        â”‚  â”‚ - icon_size=16 not   â”‚   â”‚
â”‚                           â”‚   (hardcoded launch.sh,â”‚  â”‚   explicitly linked   â”‚   â”‚
â”‚                           â”‚   implicit with icon)  â”‚  â”‚                      â”‚   â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                      â”‚   â”‚
â”‚                                                      â”‚                      â”‚   â”‚
â”‚                                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Dynamic Workspace Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INITIAL STATE: 3 workspaces (1, 2, 3)                     â”‚
â”‚                                                                              â”‚
â”‚  polybar workspace display:                                                 â”‚
â”‚  [ğŸŒ 2 3]         â† WS 1 focused, WS 2 & 3 occupied, rest empty             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   USER CLICKS "+" BUTTON IN WORKSPACE BAR                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  add-workspace.sh                                                            â”‚
â”‚                                                                              â”‚
â”‚  1. Rofi menu appears:                                                       â”‚
â”‚     â— Circle (default)                                                       â”‚
â”‚      Terminal                                                                â”‚
â”‚      Code                                                                    â”‚
â”‚      Browser                                                                 â”‚
â”‚      Files                                                                   â”‚
â”‚      ... (10 total)                                                          â”‚
â”‚                                                                              â”‚
â”‚  2. User selects: Browser                                                    â”‚
â”‚                                                                              â”‚
â”‚  3. Find first free WS: 4                                                    â”‚
â”‚                                                                              â”‚
â”‚  4. Save to ~/.config/polybar/workspace-icons.conf:                          â”‚
â”‚     4:                                                                       â”‚
â”‚                                                                              â”‚
â”‚  5. i3-msg "workspace number 4"  â† Switch to new WS                         â”‚
â”‚                                                                              â”‚
â”‚  6. ~/.config/polybar/launch.sh &  â† Recalculate bar width                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             launch.sh recalculates WS_BAR_WIDTH                              â”‚
â”‚                                                                              â”‚
â”‚  Old: WS_COUNT=3                                                             â”‚
â”‚       width = 2*12 + 3*16 + 2*22 = 132px                                   â”‚
â”‚                                                                              â”‚
â”‚  New: WS_COUNT=4 (found actual count from i3-msg)                           â”‚
â”‚       width = 2*12 + 4*16 + 3*22 = 158px                                   â”‚
â”‚                                                                              â”‚
â”‚  Exports env vars and restarts all 4 bars on each monitor                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              workspaces.sh (tail mode) detects change                        â”‚
â”‚                                                                              â”‚
â”‚  i3-msg -t subscribe -m '["workspace"]' listens for events                  â”‚
â”‚  Triggers: render_workspaces() function                                      â”‚
â”‚                                                                              â”‚
â”‚  1. Load icons from ~/.config/polybar/workspace-icons.conf                   â”‚
â”‚     CUSTOM_ICONS[4]=""                                                      â”‚
â”‚                                                                              â”‚
â”‚  2. Query i3 for all workspaces:                                             â”‚
â”‚     i3-msg -t get_workspaces                                                â”‚
â”‚                                                                              â”‚
â”‚  3. For each WS 1-10:                                                        â”‚
â”‚     - WS 1-3: always show (even if empty)                                    â”‚
â”‚     - WS 4-10: show only if exist in i3                                      â”‚
â”‚                                                                              â”‚
â”‚  4. Determine state:                                                         â”‚
â”‚     - WS 4: focused=true â†’ color ACCENT + underline                         â”‚
â”‚     - WS 2,3: exist but not focused â†’ color OCCUPIED (fg)                   â”‚
â”‚                                                                              â”‚
â”‚  5. Generate polybar markup:                                                â”‚
â”‚     %{O12}                           â† EDGE_PADDING left                     â”‚
â”‚     %{A1:i3-msg workspace 1:}        â† click handler                        â”‚
â”‚     %{F#cdd6f4}%{T2}ğŸŒ%{T-}%{F-}    â† WS 1 icon                             â”‚
â”‚     %{O22}                           â† GAP spacing                           â”‚
â”‚     %{A}                             â† close click                          â”‚
â”‚     ... (repeat for WS 2, 3, 4)                                             â”‚
â”‚     %{A3:~/.config/polybar/scripts/workspace-menu.sh 4:}  â† right-click   â”‚
â”‚     %{F#cba6f7}%{u#cba6f7}%{+u}     â† WS 4 focused: accent + underline      â”‚
â”‚     %{T2}%{T-}%{-u}                 â† icon                                  â”‚
â”‚     %{A}                             â† close right-click                    â”‚
â”‚     %{O12}                           â† EDGE_PADDING right                    â”‚
â”‚                                                                              â”‚
â”‚  6. Output to polybar                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             FINAL DISPLAY STATE: 4 workspaces with icons                     â”‚
â”‚                                                                              â”‚
â”‚  polybar workspace display:                                                 â”‚
â”‚  [ğŸŒ 2 3 ]         â† WS 4 with browser icon, focused (underline + accent)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USER RIGHT-CLICKS ON WS 4 ICON (only for WS 4+)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  workspace-menu.sh 4                                                         â”‚
â”‚                                                                              â”‚
â”‚  Rofi context menu (2 options):                                              â”‚
â”‚  â–¢ Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¸ĞºĞ¾Ğ½ĞºÑƒ (Change icon)                                             â”‚
â”‚  â–¢ Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹Ñ (Close workspace)                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                   â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                                  â”‚
              â–¼                                                  â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ change-workspace-    â”‚                     â”‚ close-workspace.sh 4   â”‚
   â”‚ icon.sh 4            â”‚                     â”‚                        â”‚
   â”‚                      â”‚                     â”‚ 1. Move all windows    â”‚
   â”‚ 1. Rofi menu:        â”‚                     â”‚    from WS 4 to WS 1:  â”‚
   â”‚    Choose new icon   â”‚                     â”‚    i3-msg              â”‚
   â”‚                      â”‚                     â”‚    "[workspace=4]      â”‚
   â”‚ 2. sed -i "/^4:/d"   â”‚                     â”‚    move to workspace 1"â”‚
   â”‚    Remove old entry  â”‚                     â”‚                        â”‚
   â”‚                      â”‚                     â”‚ 2. Switch to WS 1:     â”‚
   â”‚ 3. echo "4:NEW_ICON" â”‚                     â”‚    i3-msg workspace 1  â”‚
   â”‚    Add new entry     â”‚                     â”‚                        â”‚
   â”‚                      â”‚                     â”‚ 3. Delete icon entry:  â”‚
   â”‚ 4. NO RESTART!       â”‚                     â”‚    sed -i "/^4:/d"     â”‚
   â”‚    workspaces.sh     â”‚                     â”‚                        â”‚
   â”‚    (tail mode)       â”‚                     â”‚ 4. launch.sh &         â”‚
   â”‚    reloads icons     â”‚                     â”‚    (recalculate width) â”‚
   â”‚    automatically     â”‚                     â”‚                        â”‚
   â”‚    via IPC           â”‚                     â”‚ i3 auto-removes empty  â”‚
   â”‚                      â”‚                     â”‚ WS from memory         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                                  â”‚
              â–¼                                                  â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Icon updated         â”‚                     â”‚ WS 4 deleted, windows  â”‚
   â”‚ immediately in       â”‚                     â”‚ moved to WS 1,         â”‚
   â”‚ polybar              â”‚                     â”‚ polybar width reset    â”‚
   â”‚                      â”‚                     â”‚ to 132px               â”‚
   â”‚ [ğŸŒ 2 3 ]            â”‚                     â”‚                        â”‚
   â”‚                      â”‚                     â”‚ [ğŸŒ 2 3]               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Configuration Template Rendering Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          chezmoi init/apply                                  â”‚
â”‚                      (user selects theme at init)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          chezmoi.toml updated with selected theme_name                       â”‚
â”‚                                                                              â”‚
â”‚  [data]                                                                      â”‚
â”‚  theme_name = "dracula"  (or "monochrome")                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        chezmoi reads .chezmoidata/*.toml files (themes, layout, fonts)      â”‚
â”‚                                                                              â”‚
â”‚  chezmoi data:                                                              â”‚
â”‚  {                                                                           â”‚
â”‚    "theme_name": "dracula",                                                 â”‚
â”‚    "themes": {                                                              â”‚
â”‚      "dracula": {                                                           â”‚
â”‚        "bg": "#11111b",                                                     â”‚
â”‚        "fg": "#cdd6f4",                                                     â”‚
â”‚        ...                                                                   â”‚
â”‚      },                                                                     â”‚
â”‚      "monochrome": {...}                                                    â”‚
â”‚    },                                                                       â”‚
â”‚    "layout": {                                                              â”‚
â”‚      "gaps_outer": 8,                                                       â”‚
â”‚      "bar_height": 32,                                                      â”‚
â”‚      ...                                                                    â”‚
â”‚    },                                                                       â”‚
â”‚    "font": {                                                                â”‚
â”‚      "mono": "JetBrainsMono Nerd Font Mono",                                â”‚
â”‚      "icon_size": 16,                                                       â”‚
â”‚      ...                                                                    â”‚
â”‚    }                                                                        â”‚
â”‚  }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Chezmoi renders .tmpl files using Go text/template                       â”‚
â”‚                                                                              â”‚
â”‚  SOURCE: ~/.config/polybar/config.ini.tmpl                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚  {{- $t := index .themes .theme_name -}}                                    â”‚
â”‚  [colors]                                                                   â”‚
â”‚  background     = #00000000                                                 â”‚
â”‚  foreground     = {{ $t.fg }}                                               â”‚
â”‚  accent         = {{ $t.accent }}                                           â”‚
â”‚  island         = #dd{{ trimPrefix "#" $t.bg }}                             â”‚
â”‚  ...                                                                        â”‚
â”‚  [bar/workspaces]                                                           â”‚
â”‚  width = ${env:WS_BAR_WIDTH:{{ .layout.bar_width_workspaces }}}             â”‚
â”‚  offset-x = {{ .layout.gaps_outer }}                                        â”‚
â”‚  offset-y = {{ .layout.bar_offset_y }}                                      â”‚
â”‚  height = {{ .layout.bar_height }}                                          â”‚
â”‚  ...                                                                        â”‚
â”‚  font-0 = {{ .font.mono }}:size={{ .font.bar_size }}                       â”‚
â”‚  font-1 = {{ .font.icon }}:size={{ .font.icon_size }}                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     RENDERED: ~/.config/polybar/config.ini (actual config file)             â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚  [colors]                                                                   â”‚
â”‚  background     = #00000000                                                 â”‚
â”‚  foreground     = #cdd6f4          â† from themes.dracula.fg                 â”‚
â”‚  accent         = #cba6f7          â† from themes.dracula.accent             â”‚
â”‚  island         = #dd11111b        â† from themes.dracula.bg                 â”‚
â”‚  ...                                                                        â”‚
â”‚  [bar/workspaces]                                                           â”‚
â”‚  width = ${env:WS_BAR_WIDTH:100}   â† fallback to layout.bar_width_workspaces â”‚
â”‚  offset-x = 8                      â† from layout.gaps_outer                 â”‚
â”‚  offset-y = 6                      â† from layout.bar_offset_y               â”‚
â”‚  height = 32                       â† from layout.bar_height                 â”‚
â”‚  ...                                                                        â”‚
â”‚  font-0 = JetBrainsMono Nerd Font Mono:size=10                             â”‚
â”‚  font-1 = JetBrainsMono Nerd Font Mono:size=16                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     launch.sh reads config.ini and starts polybar instances                  â”‚
â”‚                                                                              â”‚
â”‚  MONITOR=$m polybar --reload workspaces                                     â”‚
â”‚  MONITOR=$m polybar --reload workspace-add                                  â”‚
â”‚  MONITOR=$m polybar --reload clock                                          â”‚
â”‚  MONITOR=$m polybar --reload system                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Polybar processes start and display bars on X11                 â”‚
â”‚                                                                              â”‚
â”‚  - Each bar is an X11 window with override-redirect=true                    â”‚
â”‚  - Colors, sizes, fonts applied from config.ini                             â”‚
â”‚  - IPC enabled: listen to polybar-msg reload commands                       â”‚
â”‚  - Modules initialized and start polling/subscribing                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Module Update Cycles & Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        POLYBAR MODULE LIFECYCLE                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ workspaces MODULE (custom/script, tail=true) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚ Lifecycle:                                                                   â”‚
â”‚   1. Start: ~/.config/polybar/scripts/workspaces.sh                         â”‚
â”‚      - Load WS_NAMES from shell                                             â”‚
â”‚      - Load CUSTOM_ICONS from ~/.config/polybar/workspace-icons.conf        â”‚
â”‚      - Initial render_workspaces()                                          â”‚
â”‚      - Output to stdout                                                      â”‚
â”‚                                                                              â”‚
â”‚   2. Subscribe: i3-msg -t subscribe -m '["workspace"]'                      â”‚
â”‚      - Process loop: while read -r event; do render_workspaces; done        â”‚
â”‚      - Triggers on: workspace switch, create, close, rename, urgent         â”‚
â”‚                                                                              â”‚
â”‚   3. Hotload: Icons changed                                                  â”‚
â”‚      - No script restart needed                                              â”‚
â”‚      - Next i3 event triggers reload of workspace-icons.conf                â”‚
â”‚      - render_workspaces() picks up new icons                               â”‚
â”‚                                                                              â”‚
â”‚ Inputs:                                                                      â”‚
â”‚   - i3-msg -t get_workspaces (query current state)                          â”‚
â”‚   - ~/.config/polybar/workspace-icons.conf (custom icons)                   â”‚
â”‚   - Environment: FOCUSED, OCCUPIED, EMPTY, URGENT colors                    â”‚
â”‚                                                                              â”‚
â”‚ Outputs:                                                                     â”‚
â”‚   - Polybar markup string (polybar-compatible format)                       â”‚
â”‚   - Updates in real-time when i3 events occur                               â”‚
â”‚                                                                              â”‚
â”‚ Dependencies:                                                                â”‚
â”‚   - i3-msg (IPC)                                                            â”‚
â”‚   - jq (JSON parsing)                                                        â”‚
â”‚   - Polybar >= 3.5 (tail mode support)                                      â”‚
â”‚                                                                              â”‚
â”‚ Performance: O(n) per i3 event where n=workspace count                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€ date MODULE (internal/date, interval=1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚ Lifecycle:                                                                   â”‚
â”‚   1. Initialize: Read label format and colors from config                   â”‚
â”‚   2. Every 1 second:                                                        â”‚
â”‚      - Get current time/date from system                                    â”‚
â”‚      - Format using strftime: "%a %b %d" + "%H:%M"                          â”‚
â”‚      - Render label with icon                                               â”‚
â”‚      - Output to polybar                                                     â”‚
â”‚   3. On click-left: spawn gsimplecal &                                      â”‚
â”‚                                                                              â”‚
â”‚ No external dependencies (uses libc strftime)                               â”‚
â”‚ Always runs once per second regardless of changes                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€ network MODULE (internal/network, interface-type=wired, interval=3) â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚ Lifecycle:                                                                   â”‚
â”‚   1. Every 3 seconds:                                                       â”‚
â”‚      - Query wired network interface state                                  â”‚
â”‚      - Extract: local_ip, upstream_gateway, etc.                            â”‚
â”‚   2. If interface UP:                                                        â”‚
â”‚      - Display: IP address + "success" color                                â”‚
â”‚   3. If interface DOWN:                                                      â”‚
â”‚      - Display: "disconnected" + "urgent" color                             â”‚
â”‚   4. On click-left: spawn alacritty -e nmtui &                              â”‚
â”‚                                                                              â”‚
â”‚ Polling interval: 3 seconds (trade-off: responsiveness vs CPU)              â”‚
â”‚ Interface type: "wired" (could be "wireless")                               â”‚
â”‚                                                                              â”‚
â”‚ Performance: Minimal (just reading /proc/net/*)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€ volume MODULE (internal/pulseaudio, interval=1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚ Lifecycle:                                                                   â”‚
â”‚   1. On start: Connect to PulseAudio daemon                                  â”‚
â”‚   2. Subscribe to: volume changes, device changes, mute state               â”‚
â”‚   3. Every update:                                                          â”‚
â”‚      - Get current volume %                                                 â”‚
â”‚      - Get mute state                                                       â”‚
â”‚      - If muted: display "ğŸ”‡ muted"                                         â”‚
â”‚      - If volume: display "ğŸ”Š XX%"                                          â”‚
â”‚   4. On scroll-up: pamixer -i 5 (increase 5%)                               â”‚
â”‚   5. On scroll-down: pamixer -d 5 (decrease 5%)                             â”‚
â”‚   6. On click-left: spawn pavucontrol &                                     â”‚
â”‚                                                                              â”‚
â”‚ Dependency: PulseAudio/PipeWire running (requires pipewire-pulse)           â”‚
â”‚ Note: Currently shows error if PulseAudio not running                       â”‚
â”‚                                                                              â”‚
â”‚ Performance: Event-driven (no polling when idle)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€ cpu MODULE (internal/cpu, interval=2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚ Lifecycle:                                                                   â”‚
â”‚   1. Every 2 seconds:                                                       â”‚
â”‚      - Read /proc/stat                                                      â”‚
â”‚      - Calculate CPU usage % (average of all cores)                         â”‚
â”‚      - Display: "âš™ï¸ XX%"                                                    â”‚
â”‚                                                                              â”‚
â”‚ Performance: Minimal (procfs read)                                          â”‚
â”‚ Color: info (blue)                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€ memory MODULE (internal/memory, interval=3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚ Lifecycle:                                                                   â”‚
â”‚   1. Every 3 seconds:                                                       â”‚
â”‚      - Read /proc/meminfo                                                   â”‚
â”‚      - Calculate used RAM %                                                 â”‚
â”‚      - Display: "ğŸ’¾ XX%"                                                    â”‚
â”‚                                                                              â”‚
â”‚ Performance: Minimal (procfs read)                                          â”‚
â”‚ Color: warning (yellow)                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€ tray MODULE (internal/tray) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚ Status: Empty (no system tray apps running)                                 â”‚
â”‚ Previously: nm-applet created tray icon (now removed)                       â”‚
â”‚                                                                              â”‚
â”‚ Configuration:                                                               â”‚
â”‚   - tray-spacing = 4px                                                      â”‚
â”‚   - tray-size = 18px                                                        â”‚
â”‚                                                                              â”‚
â”‚ Lifecycle: Just empty area reserved for future tray icons                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€ controlcenter & powermenu (custom/text) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚ Lifecycle:                                                                   â”‚
â”‚   1. On start: Render static text "âš™ï¸" or "â»"                              â”‚
â”‚   2. On click-left:                                                         â”‚
â”‚      - controlcenter: spawn ~/.config/rofi/scripts/controlcenter.sh         â”‚
â”‚      - powermenu: spawn ~/.config/rofi/scripts/powermenu.sh                 â”‚
â”‚                                                                              â”‚
â”‚ No updates (static modules)                                                 â”‚
â”‚ Colors: accent (âš™ï¸), urgent (â»)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Overall Module Update Timeline (hypothetical screen):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Time: 00:00:00
[ğŸŒ 2 3]        [ğŸ—“ Wed Feb 05  14:23]        [ğŸ“¶ 192.168.1.100  ğŸ”Š 80%  âš™ï¸ 45%  ğŸ’¾ 55%]

After 1 sec (date updates):
[ğŸŒ 2 3]        [ğŸ—“ Wed Feb 05  14:23]        [ğŸ“¶ 192.168.1.100  ğŸ”Š 80%  âš™ï¸ 45%  ğŸ’¾ 55%]
                              ^ (probably same second)

After 2 secs (cpu updates):
[ğŸŒ 2 3]        [ğŸ—“ Wed Feb 05  14:24]        [ğŸ“¶ 192.168.1.100  ğŸ”Š 80%  âš™ï¸ 48%  ğŸ’¾ 55%]
                              ^                                          ^

After 3 secs (network, memory update):
[ğŸŒ 2 3]        [ğŸ—“ Wed Feb 05  14:24]        [ğŸ“¶ 192.168.1.100  ğŸ”Š 80%  âš™ï¸ 48%  ğŸ’¾ 54%]
                                                                                   ^

User scrolls volume up:
[ğŸŒ 2 3]        [ğŸ—“ Wed Feb 05  14:24]        [ğŸ“¶ 192.168.1.100  ğŸ”Š 85%  âš™ï¸ 48%  ğŸ’¾ 54%]
                                                              ^

User switches to WS 2 in i3:
[2 3 ]        [ğŸ—“ Wed Feb 05  14:24]        [ğŸ“¶ 192.168.1.100  ğŸ”Š 85%  âš™ï¸ 48%  ğŸ’¾ 54%]
 ^
(workspaces module re-renders due to i3 event)
```

---

## File Dependency Graph

```
i3 WM
  â”‚
  â”œâ”€[exec_always] ~/.config/polybar/launch.sh
  â”‚                      â”‚
  â”‚                      â”œâ”€ reads: ~/.config/polybar/config.ini (generated)
  â”‚                      â”œâ”€ exports: WS_BAR_WIDTH, WS_ADD_OFFSET
  â”‚                      â””â”€ spawns: polybar --reload [workspaces, workspace-add, clock, system]
  â”‚
  â””â”€[workspace events] â†’ i3-msg IPC
                           â”‚
                           â””â”€ ~/.config/polybar/scripts/workspaces.sh.tmpl (tail mode)
                                    â”‚
                                    â”œâ”€ reads: ~/.config/polybar/workspace-icons.conf
                                    â”œâ”€ calls: i3-msg -t get_workspaces (JSON)
                                    â”œâ”€ parses: jq
                                    â””â”€ outputs: polybar markup

User clicks "+" button
  â”‚
  â””â”€ ~/.config/polybar/scripts/add-workspace.sh
       â”‚
       â”œâ”€ spawns: rofi -dmenu (icon-select.rasi.tmpl)
       â”‚            â”‚
       â”‚            â””â”€ reads: icon-select.rasi (generated)
       â”‚                       â”‚
       â”‚                       â””â”€ uses colors from: themes.toml
       â”‚
       â”œâ”€ calls: i3-msg -t get_workspaces
       â”œâ”€ writes: ~/.config/polybar/workspace-icons.conf
       â”œâ”€ calls: i3-msg workspace number N
       â””â”€ calls: ~/.config/polybar/launch.sh
                  â”‚
                  â””â”€ (triggers full restart, see launch.sh above)

User right-clicks workspace 4+
  â”‚
  â””â”€ workspace-menu.sh 4 (called from polybar markup %{A3:...})
       â”‚
       â”œâ”€ spawns: rofi -dmenu (context-menu.rasi.tmpl)
       â”‚            â”‚
       â”‚            â””â”€ reads: context-menu.rasi (generated)
       â”‚
       â””â”€ [User selects option]
          â”‚
          â”œâ”€ "Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¸ĞºĞ¾Ğ½ĞºÑƒ" â†’ change-workspace-icon.sh 4
          â”‚                      â”‚
          â”‚                      â”œâ”€ spawns: rofi -dmenu (icon-select.rasi.tmpl)
          â”‚                      â”œâ”€ sed: removes old entry from workspace-icons.conf
          â”‚                      â”œâ”€ echo: appends new entry to workspace-icons.conf
          â”‚                      â””â”€ [NO RESTART] workspaces.sh reloads via IPC
          â”‚
          â””â”€ "Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºÑĞ¿ĞµĞ¹Ñ" â†’ close-workspace.sh 4
                                    â”‚
                                    â”œâ”€ i3-msg: move windows to workspace 1
                                    â”œâ”€ i3-msg: switch to workspace 1
                                    â”œâ”€ sed: remove entry from workspace-icons.conf
                                    â””â”€ ~/..â€‹./launch.sh (full restart for width recalc)

Chezmoi apply (theme switch via rofi or init)
  â”‚
  â”œâ”€ reads: .chezmoidata/themes.toml
  â”œâ”€ reads: .chezmoidata/layout.toml
  â”œâ”€ reads: .chezmoidata/fonts.toml
  â”œâ”€ reads: dot_config/polybar/config.ini.tmpl
  â”œâ”€ reads: dot_config/polybar/scripts/workspaces.sh.tmpl
  â”œâ”€ reads: dot_config/rofi/themes/icon-select.rasi.tmpl
  â”œâ”€ reads: dot_config/rofi/themes/context-menu.rasi.tmpl
  â”‚
  â””â”€ renders (Go text/template):
      â”œâ”€ ~/.config/polybar/config.ini (with colors, sizes, fonts)
      â”œâ”€ ~/.config/polybar/scripts/workspaces.sh (with GAP value)
      â”œâ”€ ~/.config/rofi/themes/icon-select.rasi (with colors)
      â””â”€ ~/.config/rofi/themes/context-menu.rasi (with colors)
         â”‚
         â””â”€ [trigger polybar reload if running]
            ~/.config/polybar/launch.sh
```
