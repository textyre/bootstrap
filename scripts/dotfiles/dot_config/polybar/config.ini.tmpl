{{- $t := index .themes .theme_name -}}
; Polybar config — Cyberpunk Rice (Islands/Pills style)
; Generated by chezmoi — DO NOT EDIT DIRECTLY

; ============================================================
; COLORS
; ============================================================
[colors]
background     = #00000000
foreground     = {{ $t.fg }}
foreground-dim = {{ $t.fg_dim }}
accent         = {{ $t.accent }}
accent2        = {{ $t.accent2 }}
urgent         = {{ $t.urgent }}
success        = {{ $t.success }}
warning        = {{ $t.warning }}
info           = {{ $t.info }}
; Island background (semi-transparent)
island         = {{ $t.bg }}dd

; ============================================================
; BAR
; ============================================================
[bar/main]
monitor = ${env:MONITOR:}
width = 100%
height = {{ .layout.bar_height }}
offset-x = 0
offset-y = 0
fixed-center = true

background = ${colors.background}
foreground = ${colors.foreground}

border-size = 0
padding-left = 1
padding-right = 1
module-margin-left = 0
module-margin-right = 0

font-0 = {{ .font.mono }}:size={{ .font.bar_size }}:weight=bold;2
font-1 = {{ .font.icon }}:size={{ .font.icon_size }};3
font-2 = {{ .font.mono }}:size={{ .font.bar_size }};2

; Module layout
modules-left = left-pad i3 right-pad spacer
modules-center = left-pad date right-pad
modules-right = left-pad network sep volume sep cpu sep memory right-pad

enable-ipc = true

; Tray
tray-position = right
tray-padding = 4
tray-background = ${colors.island}
tray-maxsize = 18

override-redirect = false
wm-restack = i3

cursor-click = pointer
cursor-scroll = ns-resize

; ============================================================
; ISLAND DECORATORS
; ============================================================
[module/left-pad]
type = custom/text
content = "%{T2}%{T-}"
content-foreground = ${colors.island}

[module/right-pad]
type = custom/text
content = "%{T2}%{T-}"
content-foreground = ${colors.island}

[module/spacer]
type = custom/text
content = " "

[module/sep]
type = custom/text
content = "  "
content-foreground = ${colors.foreground-dim}
content-background = ${colors.island}

; ============================================================
; LEFT: WORKSPACES
; ============================================================
[module/i3]
type = internal/i3
pin-workspaces = true
strip-wsnumbers = false
index-sort = true
enable-click = true
enable-scroll = true

format = <label-state> <label-mode>
format-background = ${colors.island}

label-mode = %mode%
label-mode-padding = 2
label-mode-foreground = ${colors.urgent}
label-mode-background = ${colors.island}

; Focused workspace
label-focused = %name%
label-focused-foreground = ${colors.accent}
label-focused-background = ${colors.island}
label-focused-underline = ${colors.accent}
label-focused-padding = 2

; Unfocused workspace
label-unfocused = %name%
label-unfocused-foreground = ${colors.foreground-dim}
label-unfocused-background = ${colors.island}
label-unfocused-padding = 2

; Visible (multi-monitor)
label-visible = %name%
label-visible-foreground = ${colors.foreground}
label-visible-background = ${colors.island}
label-visible-padding = 2

; Urgent workspace
label-urgent = %name%
label-urgent-foreground = ${colors.urgent}
label-urgent-background = ${colors.island}
label-urgent-padding = 2

label-separator = ""

; ============================================================
; CENTER: DATE/TIME
; ============================================================
[module/date]
type = internal/date
interval = 1

date = "%a %b %d"
time = "%H:%M"

format = <label>
format-background = ${colors.island}
format-foreground = ${colors.foreground}
format-padding = 2

label = "  %date%    %time%"

; ============================================================
; RIGHT: SYSTEM INFO
; ============================================================
[module/network]
type = internal/network
interface-type = wired
interval = 3

format-connected = <label-connected>
format-connected-background = ${colors.island}
format-connected-padding = 1
label-connected = "  %local_ip%"
label-connected-foreground = ${colors.success}

format-disconnected = <label-disconnected>
format-disconnected-background = ${colors.island}
format-disconnected-padding = 1
label-disconnected = "  disconnected"
label-disconnected-foreground = ${colors.urgent}

[module/volume]
type = internal/pulseaudio
use-ui-max = true

format-volume = <label-volume>
format-volume-background = ${colors.island}
format-volume-padding = 1
label-volume = "  %percentage%%"
label-volume-foreground = ${colors.foreground}

format-muted = <label-muted>
format-muted-background = ${colors.island}
format-muted-padding = 1
label-muted = "  muted"
label-muted-foreground = ${colors.foreground-dim}

[module/cpu]
type = internal/cpu
interval = 2

format = <label>
format-background = ${colors.island}
format-padding = 1
label = "  %percentage%%"
label-foreground = ${colors.info}

[module/memory]
type = internal/memory
interval = 3

format = <label>
format-background = ${colors.island}
format-padding = 1
label = "  %percentage_used%%"
label-foreground = ${colors.warning}

; ============================================================
; SETTINGS
; ============================================================
[settings]
screenchange-reload = true
pseudo-transparency = true
