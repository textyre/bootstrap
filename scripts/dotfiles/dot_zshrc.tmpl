{{- $t := index .themes .theme_name -}}
# ~/.zshrc — Cyberpunk Rice
# Generated by chezmoi — DO NOT EDIT DIRECTLY

# ---- History ----
HISTSIZE=10000
SAVEHIST=10000
HISTFILE=~/.zsh_history
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_SAVE_NO_DUPS
setopt SHARE_HISTORY
setopt APPEND_HISTORY

# ---- Shell options ----
setopt AUTO_CD
setopt CORRECT
setopt GLOB_DOTS
setopt EXTENDED_GLOB
setopt NOTIFY
unsetopt BEEP

# ---- PATH ----
[[ ":$PATH:" != *":$HOME/.local/bin:"* ]] && export PATH="$HOME/.local/bin:$PATH"

# ---- Environment variables ----
export EDITOR="nvim"
export VISUAL="nvim"
export TERMINAL="alacritty"
export BROWSER="firefox"
export LANG="en_US.UTF-8"
export BAT_THEME="{{ $t.bat_theme }}"

# ---- Key bindings ----
bindkey -e
bindkey '^[[A' history-search-backward
bindkey '^[[B' history-search-forward
bindkey '^[[3~' delete-char

# ---- Completions ----
autoload -Uz compinit && compinit
zstyle ':completion:*' menu select
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'
zstyle ':completion:*' list-colors "${(s.:.)LS_COLORS}"

# ---- Aliases ----
alias ls='ls --color=auto'
alias ll='ls -lah --color=auto'
alias la='ls -A --color=auto'
alias l='ls -CF --color=auto'
alias grep='grep --color=auto'
alias df='df -h'
alias du='du -h'
alias free='free -h'
alias gs='git status'
alias gl='git log --oneline -20'
alias gd='git diff'
alias cat='bat --paging=never --style=plain'
alias vim='nvim'

# ---- Plugins ----
# zsh-syntax-highlighting
if [ -f /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh ]; then
    source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
fi

# zsh-autosuggestions
if [ -f /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh ]; then
    source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
    ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE="fg={{ $t.fg_dim }}"
fi

# ---- FZF integration ----
if command -v fzf &>/dev/null; then
    eval "$(fzf --zsh 2>/dev/null)" || true
    export FZF_DEFAULT_OPTS="
        --color=bg+:{{ $t.bg_light }},fg+:{{ $t.fg }},hl:{{ $t.accent }},hl+:{{ $t.accent2 }}
        --color=info:{{ $t.info }},prompt:{{ $t.accent }},pointer:{{ $t.accent2 }},marker:{{ $t.success }}
        --color=spinner:{{ $t.accent }},header:{{ $t.fg_dim }},gutter:-1
        --border rounded --margin 1 --padding 1"
fi

# ---- Starship prompt ----
eval "$(starship init zsh)"
