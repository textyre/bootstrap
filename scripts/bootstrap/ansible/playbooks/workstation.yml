---
# Полная настройка рабочей станции после установки ОС
#
# Использование:
#   Через bootstrap: ./bootstrap.sh  (vault пароль запрашивается один раз)
#   Вручную: task workstation
#   Пароль sudo зашифрован в inventory/group_vars/all/vault.yml (Ansible Vault)
#   Vault password: ~/.vault-pass или pass show ansible/vault-password
#
# Переопределение списка пакетов:
#   ansible-playbook playbooks/workstation.yml -e '{"packages_docker": ["docker", "docker-compose", "docker-buildx"]}'
#
# Только установка пакетов (без зеркал):
#   ansible-playbook playbooks/workstation.yml --tags install
- name: Setup workstation
  hosts: localhost
  connection: local
  become: true
  gather_facts: true
  roles:
    - role: reflector
      when: ansible_os_family == 'Archlinux'
    - role: yay
      when: ansible_os_family == 'Archlinux'
    - packages
