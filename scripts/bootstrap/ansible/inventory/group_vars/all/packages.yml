---
# === ЦЕНТРАЛЬНЫЙ РЕЕСТР ПАКЕТОВ ===
# Единственный источник данных для ролей packages, yay.
# Роли содержат только логику; данные живут здесь.
#
# Сервисы (docker, lightdm) → соответствующие роли docker/lightdm
# Группы пользователя → роль user (system.yml)
#
# Переопределение:
#   Per-host:    inventory/host_vars/<hostname>/packages.yml
#   Per-runtime: ansible-playbook ... -e '{"packages_docker": ["docker", "docker-compose", "docker-buildx"]}'
#
# Ansible precedence: role defaults (2) < group_vars/all (4) < host_vars (8) < -e (22)

# ============================================================
#  yay (AUR helper) — роль roles/yay
# ============================================================

# URL репозитория yay в AUR
yay_aur_url: "https://aur.archlinux.org/yay.git"

# Пользователь для сборки (makepkg не работает от root)
yay_build_user: "{{ ansible_env.SUDO_USER | default(ansible_user_id) }}"

# Зависимости для сборки yay из исходников
yay_build_deps:
  - base-devel
  - git
  - go

# ============================================================
#  Пакеты рабочей станции — роль roles/packages
# ============================================================

# --- Базовые утилиты ---
packages_base:
  - git
  - curl
  - htop
  - tmux
  - unzip
  - rsync
  - openssh          # SSH клиент/сервер (для роли ssh)
  - chezmoi          # Менеджер дотфайлов (для роли chezmoi)
  - nftables         # Firewall (для роли firewall)

# --- Редакторы ---
packages_editors:
  - vim
  - neovim

# --- Docker ---
packages_docker:
  - docker
  - docker-compose

# --- Xorg: сервер, утилиты, драйверы ---
packages_xorg:
  - xorg              # Xorg core (xorg-server, etc.)
  - xorg-apps         # утилиты X (xrandr, xrdb, xauth...)
  - xorg-xinit        # startx / xinit
  - xorg-drivers      # видеодрайверы Xorg

# --- Оконный менеджер: визуал и хелперы ---
# i3 ставится из AUR (i3-rounded-border-patch-git)
packages_wm:
  - picom             # композитор (тени, прозрачность, анимации)
  - dmenu             # минимальный лаунчер (фолбэк)
  - polybar           # статус-бар
  - rofi              # лаунчер приложений и меню
  - dunst             # демон уведомлений
  - feh               # управление обоями
  - flameshot         # скриншоты

# --- Файловый менеджер ---
packages_filemanager:
  - thunar            # GUI файловый менеджер
  - thunar-volman     # управление съёмными носителями
  - tumbler           # миниатюры
  - gvfs              # корзина / удалённые ФС

# --- Сеть ---
packages_network:
  - networkmanager
  - network-manager-applet

# --- Медиа и управление ---
packages_media:
  - playerctl         # MPRIS управление плеером
  - pamixer           # управление громкостью PulseAudio
  - brightnessctl     # управление яркостью

# --- Десктоп-интеграция ---
packages_desktop:
  - xdg-utils         # xdg-open и другие
  - xdg-user-dirs     # ~/Documents, ~/Downloads, ...
  - xss-lock          # автоблокировка экрана
  - imagemagick       # блюр для lock screen
  - lxappearance      # GTK тема (GUI)

# --- Графика ---
packages_graphics:
  - mesa              # OpenGL/GLX (Intel/AMD)

# --- Сессия / грифтер ---
packages_session:
  - lightdm             # display manager
  - lightdm-gtk-greeter # greeter для LightDM

# --- Терминал ---
packages_terminal:
  - alacritty         # GPU-accelerated терминал

# --- Шрифты ---
packages_fonts:
  - ttf-jetbrains-mono-nerd  # JetBrains Mono + Nerd Font иконки
  - ttf-firacode-nerd
  - ttf-hack-nerd
  - ttf-iosevka-nerd
  - ttf-nerd-fonts-symbols   # только символы/иконки Nerd Font
  - ttf-font-awesome
  - noto-fonts
  - terminus-font            # bitmap шрифт

# --- Темы и иконки ---
packages_theming:
  - papirus-icon-theme       # иконки Papirus

# --- Поиск (fuzzy finder + grep замена) ---
packages_search:
  - fzf               # интерактивный fuzzy finder
  - ripgrep           # быстрый grep (rg)

# --- Просмотр файлов и данных ---
packages_viewers:
  - bat               # cat с подсветкой синтаксиса
  - jq                # просмотр и обработка JSON

# --- Пакеты специфичные для дистрибутива ---
# Ключи: Archlinux, Debian (значения ansible_os_family)
packages_distro:
  Archlinux:
    - base-devel       # компиляция, makepkg
    - pacman-contrib   # paccache, checkupdates, pacdiff
  Debian:
    - build-essential

# --- AUR пакеты (только Arch Linux, через yay) ---
# yay устанавливается отдельной ролью (roles/yay)
packages_aur:
  - i3-rounded-border-patch-git   # i3 с патчем скруглённых рамок
  - i3lock-color                  # lock screen с кастомизацией цветов
  - rofi-greenclip                # менеджер буфера обмена для rofi
  - dracula-gtk-theme             # Dracula GTK тема
