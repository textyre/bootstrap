---
# === ЦЕНТРАЛЬНЫЙ РЕЕСТР ПАКЕТОВ ===
# Единственный источник данных для ролей packages, yay.
# Роли содержат только логику; данные живут здесь.
#
# Сервисы (docker, lightdm) → соответствующие роли docker/lightdm
# Группы пользователя → роль user (system.yml)
#
# Переопределение:
#   Per-host:    inventory/host_vars/<hostname>/packages.yml
#   Per-runtime: ansible-playbook ... -e '{"packages_docker": ["docker", "docker-compose", "docker-buildx"]}'
#
# Ansible precedence: role defaults (2) < group_vars/all (4) < host_vars (8) < -e (22)

# ============================================================
#  yay (AUR helper) — роль roles/yay
# ============================================================

# URL репозитория yay в AUR
yay_aur_url: "https://aur.archlinux.org/yay.git"

# Пользователь для сборки (makepkg не работает от root)
yay_build_user: "{{ ansible_env.SUDO_USER | default(ansible_user_id) }}"

# Зависимости для сборки yay из исходников
yay_build_deps:
  - base-devel
  - git
  - go

# ============================================================
#  Пакеты рабочей станции — роль roles/packages
# ============================================================

# --- Базовые утилиты ---
packages_base:
  - git
  - curl
  - htop
  - tmux
  - unzip
  - rsync
  - openssh          # SSH клиент/сервер (для роли ssh)
  - chezmoi          # Менеджер дотфайлов (для роли chezmoi)
  - nftables         # Firewall (для роли firewall)

# --- Редакторы ---
packages_editors:
  - vim
  - neovim

# --- Docker ---
packages_docker:
  - docker
  - docker-compose

# --- Xorg: сервер, утилиты, драйверы ---
packages_xorg:
  - xorg              # Xorg core (xorg-server, etc.)
  - xorg-apps         # утилиты X (xrandr, xrdb, xauth...)
  - xorg-xinit        # startx / xinit
  - xorg-drivers      # видеодрайверы Xorg

# --- Оконный менеджер: визуал и хелперы ---
# i3 ставится из AUR (i3-rounded-border-patch-git)
packages_wm:
  - picom             # композитор (тени, прозрачность)
  - dmenu             # минимальный лаунчер

# --- Графика ---
packages_graphics:
  - mesa              # OpenGL/GLX (Intel/AMD)

# --- Сессия / грифтер ---
packages_session:
  - lightdm             # display manager
  - lightdm-gtk-greeter # greeter для LightDM

# --- Терминал ---
packages_terminal:
  - alacritty         # GPU-accelerated терминал

# --- Шрифты ---
packages_fonts:
  - ttf-jetbrains-mono
  - ttf-font-awesome
  - noto-fonts

# --- Поиск (fuzzy finder + grep замена) ---
packages_search:
  - fzf               # интерактивный fuzzy finder
  - ripgrep           # быстрый grep (rg)

# --- Просмотр файлов и данных ---
packages_viewers:
  - bat               # cat с подсветкой синтаксиса
  - jq                # просмотр и обработка JSON

# --- Пакеты специфичные для дистрибутива ---
# Ключи: Archlinux, Debian (значения ansible_os_family)
packages_distro:
  Archlinux:
    - base-devel       # компиляция, makepkg
    - pacman-contrib   # paccache, checkupdates, pacdiff
  Debian:
    - build-essential

# --- AUR пакеты (только Arch Linux, через yay) ---
# yay устанавливается отдельной ролью (roles/yay)
packages_aur:
  - i3-rounded-border-patch-git 4.22.r31.gd06f97c4-1    # i3 с патчем скруглённых рамок
