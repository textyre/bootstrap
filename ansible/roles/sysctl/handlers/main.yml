---
# Handlers for sysctl role

- name: Apply sysctl settings
  listen: "reload sysctl"
  # -e = игнорировать ошибки неизвестных параметров (например kernel.unprivileged_userns_clone
  #      отсутствует на стандартном upstream ядре — distro-agnostic поведение)
  # --system = читает все /etc/sysctl.d/*.conf (init-agnostic, не зависит от systemd)
  ansible.builtin.command: sysctl -e --system
  changed_when: true
