---
# === gpu_drivers / report â€” Configuration summary ===
# SRP: only emits a debug summary; never installs or configures.

- name: Report GPU driver configuration
  ansible.builtin.debug:
    msg:
      - "=== GPU Driver Configuration ==="
      - "Detection:       {{ 'manual override' if gpu_drivers_vendor != 'auto' else 'auto (lspci)' }}"
      - "NVIDIA:          {{ _gpu_drivers_has_nvidia }} (variant: {{ gpu_drivers_nvidia_variant if _gpu_drivers_has_nvidia else 'n/a' }})"
      - "AMD:             {{ _gpu_drivers_has_amd }}"
      - "Intel:           {{ _gpu_drivers_has_intel }}"
      - "Multilib:        {{ gpu_drivers_multilib }}"
      - "Vulkan tools:    {{ gpu_drivers_vulkan_tools }}"
      - "VA-API:          {{ gpu_drivers_vaapi }}"
      - "KMS:             {{ gpu_drivers_nvidia_kms if _gpu_drivers_has_nvidia else 'n/a' }}"
      - "Initramfs:       {{ (_gpu_drivers_initramfs_tool | default('n/a')) if _gpu_drivers_has_nvidia else 'n/a' }}"
  tags: ['gpu', 'drivers']
