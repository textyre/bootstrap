---
# =========================================================================
# report_render.yml — render execution report table
# =========================================================================
# Usage:
#   - ansible.builtin.include_role:
#       name: common
#       tasks_from: report_render.yml
#     vars:
#       common_rpt_fact: "_base_system_phases"
#       common_rpt_title: "base_system"
#       common_rpt_footer_rows: []   # optional extra footer rows
#
# Parameters:
#   common_rpt_fact        (string) - Fact name with accumulated rows (REQUIRED)
#   common_rpt_title       (string) - Role name for the report header (REQUIRED)
#   common_rpt_footer_rows (list)   - Extra pre-formatted rows before closing line
# =========================================================================

- name: "{{ common_rpt_title }} — Execution Report"
  ansible.builtin.debug:
    msg: "{{ common_rpt_header + (lookup('vars', common_rpt_fact, default=[]) | list) + common_rpt_extra + common_rpt_footer }}"
  vars:
    common_rpt_header:
      - "+----------------------------+------------+--------------------------+"
      - "| Phase                      | Status     | Details                  |"
      - "+----------------------------+------------+--------------------------+"
    common_rpt_extra: "{{ common_rpt_footer_rows | default([]) }}"
    common_rpt_footer:
      - "+----------------------------+------------+--------------------------+"
