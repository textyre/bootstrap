---
# === yay: AUR helper installation + AUR package management ===

- name: Ensure host is Arch Linux
  ansible.builtin.assert:
    that:
      - ansible_facts['os_family'] == 'Archlinux'
    fail_msg: "yay role requires Arch Linux"
  tags: ['aur', 'install']

- name: Install yay binary
  ansible.builtin.include_tasks: install-yay-binary.yml
  tags: ['aur', 'install']

- name: Configure passwordless sudo for pacman
  ansible.builtin.include_tasks: configure-sudoers.yml
  tags: ['aur', 'sudoers']

- name: Install AUR packages
  ansible.builtin.include_tasks: install-aur-packages.yml
  when: packages_aur | default([]) | length > 0
  tags: ['aur', 'install']
