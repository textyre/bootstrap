---
# === yay: AUR helper installation + AUR package management ===

- name: Ensure host is Arch Linux
  ansible.builtin.assert:
    that:
      - ansible_facts['os_family'] == 'Archlinux'
    fail_msg: "yay role requires Arch Linux"
  tags: ['aur', 'setup', 'install']

- name: Set up AUR builder user
  ansible.builtin.include_tasks: setup-aur-builder.yml
  tags: ['aur', 'setup']

- name: Set up yay binary
  ansible.builtin.include_tasks: setup-yay-binary.yml
  tags: ['aur', 'setup']

- name: Manage AUR packages
  ansible.builtin.include_tasks: manage-aur-packages.yml
  when: yay_packages_aur | default([]) | length > 0
  tags: ['aur', 'install']
