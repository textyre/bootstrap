---
# Генерация локалей (Void Linux)
# /etc/default/libc-locales + xbps-reconfigure

- name: Enable locales in libc-locales
  ansible.builtin.lineinfile:
    path: /etc/default/libc-locales
    regexp: '^#?\s*{{ item | regex_escape }}'
    line: "{{ item }} UTF-8"
    state: present
  loop: "{{ locale_list }}"
  notify: Reconfigure glibc-locales (Void)
  tags: ['locale']

- name: Flush handlers (ensure xbps-reconfigure runs before verify)
  ansible.builtin.meta: flush_handlers
  tags: ['locale']
