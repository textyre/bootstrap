---
# Arch Linux package installation for power_management

- name: Install TLP (laptop)
  community.general.pacman:
    name:
      - tlp
      - tlp-rdw
    state: present
  when: _power_management_is_laptop
  tags: ['power', 'tlp']

- name: Mask systemd-rfkill on Arch (conflicts with TLP)
  ansible.builtin.systemd:
    name: "{{ item }}"
    masked: true
  loop:
    - systemd-rfkill.service
    - systemd-rfkill.socket
  when: _power_management_is_laptop
  tags: ['power', 'tlp']

- name: Install cpupower
  community.general.pacman:
    name:
      - cpupower
    state: present
  tags: ['power', 'cpu']
