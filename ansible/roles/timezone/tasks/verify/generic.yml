---
# Проверка таймзоны через /etc/localtime symlink (non-systemd)
- name: Verify timezone is set (non-systemd)
  ansible.builtin.command: readlink -f /etc/localtime
  register: _timezone_check_generic
  changed_when: false
  tags: ['timezone']

- name: Assert timezone matches expected value (non-systemd)
  ansible.builtin.assert:
    that:
      - timezone_name in _timezone_check_generic.stdout
    fail_msg: "Timezone mismatch: /etc/localtime -> '{{ _timezone_check_generic.stdout }}', expected '{{ timezone_name }}'"
    quiet: true
  tags: ['timezone']
