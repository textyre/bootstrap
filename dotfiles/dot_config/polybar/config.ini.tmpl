{{- $t := index .themes .theme_name -}}
; ============================================================
; Polybar Config — 3-Bar Floating Islands Design
; Generated by chezmoi — DO NOT EDIT DIRECTLY
; ============================================================

; ============================================================
; COLORS
; ============================================================
[colors]
background     = #00000000
foreground     = {{ $t.fg }}
foreground-dim = {{ $t.fg_dim }}
accent         = {{ $t.accent }}
accent2        = {{ $t.accent2 }}
urgent         = {{ $t.urgent }}
success        = {{ $t.success }}
warning        = {{ $t.warning }}
info           = {{ $t.info }}
island         = #dd{{ trimPrefix "#" $t.bg }}
island-border  = #66{{ trimPrefix "#" $t.border_active }}

; ============================================================
; BAR: WORKSPACES (LEFT ISLAND)
; ============================================================
[bar/workspaces]
monitor = ${env:MONITOR:}
width = 420
offset-x = {{ .layout.gaps_outer }}
offset-y = {{ .layout.bar_offset_y }}
height = {{ .layout.bar_height }}

background = ${colors.island}
foreground = ${colors.foreground}
radius = {{ .layout.bar_radius }}
border-size = {{ .layout.bar_border }}
border-color = ${colors.island-border}

override-redirect = true
wm-restack = i3

modules-center = workspaces

enable-ipc = true
cursor-click = pointer

font-0 = {{ .font.mono }}:size={{ .font.bar_size }}:weight=bold;2
font-1 = {{ .font.icon }}:size={{ .font.icon_size }};3
font-2 = {{ .font.mono }}:size={{ .font.bar_size }};2

padding-left = 0
padding-right = 0

; ============================================================
; BAR: CLOCK (CENTER ISLAND)
; ============================================================
[bar/clock]
monitor = ${env:MONITOR:}
width = 220
offset-x = 50%:-110
offset-y = {{ .layout.bar_offset_y }}
height = {{ .layout.bar_height }}

background = ${colors.island}
foreground = ${colors.foreground}
radius = {{ .layout.bar_radius }}
border-size = {{ .layout.bar_border }}
border-color = ${colors.island-border}

override-redirect = true
wm-restack = i3

modules-center = date

enable-ipc = true
cursor-click = pointer

font-0 = {{ .font.mono }}:size={{ .font.bar_size }}:weight=bold;2
font-1 = {{ .font.icon }}:size={{ .font.icon_size }};3
font-2 = {{ .font.mono }}:size={{ .font.bar_size }};2

padding-left = 0
padding-right = 0

; ============================================================
; BAR: SYSTEM (RIGHT ISLAND)
; ============================================================
[bar/system]
monitor = ${env:MONITOR:}
width = 440
offset-x = 100%:-448
offset-y = {{ .layout.bar_offset_y }}
height = {{ .layout.bar_height }}

background = ${colors.island}
foreground = ${colors.foreground}
radius = {{ .layout.bar_radius }}
border-size = {{ .layout.bar_border }}
border-color = ${colors.island-border}

override-redirect = true
wm-restack = i3

modules-left = network sep volume sep cpu sep memory
modules-right = sep controlcenter sep powermenu sep tray

enable-ipc = true
cursor-click = pointer
cursor-scroll = ns-resize

font-0 = {{ .font.mono }}:size={{ .font.bar_size }}:weight=bold;2
font-1 = {{ .font.icon }}:size={{ .font.icon_size }};3
font-2 = {{ .font.mono }}:size={{ .font.bar_size }};2

padding-left = 2
padding-right = 1

; ============================================================
; MODULE: WORKSPACES
; ============================================================
[module/workspaces]
type = custom/script
exec = ~/.config/polybar/scripts/workspaces.sh
tail = true

; ============================================================
; MODULE: SEPARATOR
; ============================================================
[module/sep]
type = custom/text
format = "  "
format-foreground = ${colors.foreground-dim}

; ============================================================
; MODULE: DATE/TIME
; ============================================================
[module/date]
type = internal/date
interval = 1
date = "%a %b %d"
time = "%H:%M"
format = <label>
format-foreground = ${colors.foreground}
format-padding = 2
label = "  %date%    %time%"
click-left = bash -c 'command -v naivecalendar &>/dev/null && naivecalendar || notify-send "Calendar" "$(cal)" &'

; ============================================================
; MODULE: NETWORK
; ============================================================
[module/network]
type = internal/network
interface-type = {{ .layout.network_interface_type }}
interval = 3
format-connected = <label-connected>
format-connected-padding = 1
label-connected = "  %local_ip%"
label-connected-foreground = ${colors.success}
format-disconnected = <label-disconnected>
format-disconnected-padding = 1
label-disconnected = "  disconnected"
label-disconnected-foreground = ${colors.urgent}
click-left = alacritty -e nmtui &

; ============================================================
; MODULE: VOLUME
; ============================================================
[module/volume]
type = internal/pulseaudio
use-ui-max = true
format-volume = <label-volume>
format-volume-padding = 1
label-volume = "  %percentage%%"
label-volume-foreground = ${colors.foreground}
format-muted = <label-muted>
format-muted-padding = 1
label-muted = "  muted"
label-muted-foreground = ${colors.foreground-dim}
click-left = pavucontrol &
scroll-up = pamixer -i 5
scroll-down = pamixer -d 5

; ============================================================
; MODULE: CPU
; ============================================================
[module/cpu]
type = internal/cpu
interval = 2
format = <label>
format-padding = 1
label = "  %percentage%%"
label-foreground = ${colors.info}

; ============================================================
; MODULE: MEMORY
; ============================================================
[module/memory]
type = internal/memory
interval = 3
format = <label>
format-padding = 1
label = "  %percentage_used%%"
label-foreground = ${colors.warning}

; ============================================================
; MODULE: CONTROL CENTER
; ============================================================
[module/controlcenter]
type = custom/text
format = " "
format-foreground = ${colors.accent}
format-padding = 1
click-left = ~/.config/rofi/scripts/controlcenter.sh &

; ============================================================
; MODULE: POWER MENU
; ============================================================
[module/powermenu]
type = custom/text
format = " "
format-foreground = ${colors.urgent}
format-padding = 1
click-left = ~/.config/rofi/scripts/powermenu.sh &

; ============================================================
; MODULE: TRAY
; ============================================================
[module/tray]
type = internal/tray
tray-spacing = 4
tray-size = 18

; ============================================================
; SETTINGS
; ============================================================
[settings]
screenchange-reload = true
pseudo-transparency = true
